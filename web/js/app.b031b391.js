(function(){"use strict";var e={4942:function(e,t,a){var n=a(5130),o=a(6768);function l(e,t,a,n,l,r){const u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(u)}var r=a(144),u=a(7910);const c="http://127.0.0.1:5000/",i=(0,u.io)(c);var s=i,d=a(3851),p=(0,o.pM)({setup(){const e=(0,r.Kh)({message:"",messages:[],nextMessageId:0});function t(){s.emit("chat message",e.message),e.message=""}function a(e){(0,d.df)({title:e.data,type:"success"})}return(0,o.sV)((()=>{s.on("update",a)})),(0,o.hi)((()=>{s.off("chat message",a)})),{...e,sendMessage:t}}}),m=a(1241);const v=(0,m.A)(p,[["render",l]]);var f=v,g=a(1387),h=(a(4114),a(4232)),k=a(8355);const y=({method:e,url:t,payload:a,config:n})=>{const o={method:e,url:t,...n,headers:{...n?.headers}};return"GET"===e?o.params=a:o.data=a,(0,k.A)(o).then((e=>e.data)).catch((e=>{throw e}))};var b=y;const _="http://127.0.0.1:5000";function j(e){return b({method:"post",url:`${_}/getProjectDetail`,payload:e}).then((e=>e.data))}function w(e){return b({method:"get",url:`${_}/get_project_images/${e.projectName}`}).then((e=>e.data))}function x(e){return b({method:"post",url:`${_}/save_project/${e.projectName}`,payload:{detail:e.ProjectDetail}}).then((e=>e.data))}function F(e){return b({method:"post",url:`${_}/makeMovie`,payload:e}).then((e=>e.data))}var C=a(1219),R=(a(4603),a(7566),a(8721),a(7477));const V={class:"imagePackage"},K=["onClick"],L={key:0,class:"icon-contant"},N={class:"image-item"},E=["src"];var A=(0,o.pM)({__name:"imagePackage",props:{projectName:{},index:{},currentData:{}},emits:["changeImages"],setup(e,{emit:t}){const a=e,n=t,l="http://127.0.0.1:5000",u=l+"/upload_image/"+a.projectName,c=(0,r.KR)(""),i=(0,r.KR)([]),s=(e,t)=>{c.value=URL.createObjectURL(t.raw)},d=e=>"image/jpeg"!==e.type?(C.nk.error("Avatar picture must be JPG format!"),!1):!(e.size/1024/1024>2)||(C.nk.error("Avatar picture size can not exceed 2MB!"),!1),p=e=>{const t="http://127.0.0.1:5000",n=a.projectName;return`${t}/images/${n}/images/${e}`},m=async e=>{try{const t=await w({projectName:e});i.value=t.images}catch(t){console.error("Failed to fetch user details",t)}},v=e=>{n("changeImages",e)};return(0,o.sV)((()=>{m(a.projectName)})),(e,t)=>{const a=(0,o.g2)("Select"),n=(0,o.g2)("el-icon"),l=(0,o.g2)("el-image"),m=(0,o.g2)("el-upload");return(0,o.uX)(),(0,o.CE)("div",V,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.value,(t=>((0,o.uX)(),(0,o.CE)("div",{class:"image-item",onClick:e=>v(t)},[t==e.currentData.bgi?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.bF)(n,{color:"#fff"},{default:(0,o.k6)((()=>[(0,o.bF)(a)])),_:1})])):(0,o.Q3)("",!0),(0,o.bF)(l,{style:{width:"100%",height:"100%"},src:p(t),"zoom-rate":1.2,"max-scale":7,"min-scale":.2,fit:"contain"},null,8,["src"])],8,K)))),256)),(0,o.Lk)("div",N,[(0,o.bF)(m,{class:"avatar-uploader",action:u,"show-file-list":!1,"on-success":s,"before-upload":d},{default:(0,o.k6)((()=>[c.value?((0,o.uX)(),(0,o.CE)("img",{key:0,src:c.value,class:"avatar"},null,8,E)):((0,o.uX)(),(0,o.Wv)(n,{key:1,class:"avatar-uploader-icon"},{default:(0,o.k6)((()=>[(0,o.bF)((0,r.R1)(R.Plus))])),_:1}))])),_:1})])])}}});const X=(0,m.A)(A,[["__scopeId","data-v-ffa75650"]]);var P=X,W=a(1527),$=a.n(W),O=a(7377),I=a(47);const M={controls:"",width:"100%",height:"600px"},S=["src"],U={class:"dialog-footer"};var T=(0,o.pM)({__name:"index",props:{projectName:{}},emits:["close"],setup(e,{emit:t}){const a=e,n=t,l=(0,r.KR)(!0),u="http://127.0.0.1:5000",c=u+"/video/"+a.projectName,i=(0,r.KR)(c),s=()=>{n("close")};return(e,t)=>((0,o.uX)(),(0,o.Wv)((0,r.R1)(O.kZ),{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),title:"观看视频",width:"600px"},{footer:(0,o.k6)((()=>[(0,o.Lk)("span",U,[(0,o.bF)((0,r.R1)(I.S2),{onClick:s},{default:(0,o.k6)((()=>[(0,o.eW)("取消")])),_:1}),(0,o.bF)((0,r.R1)(I.S2),{type:"primary",onClick:s},{default:(0,o.k6)((()=>[(0,o.eW)(" 确定 ")])),_:1})])])),default:(0,o.k6)((()=>[(0,o.Lk)("video",M,[(0,o.Lk)("source",{src:i.value,type:"video/mp4"},null,8,S),(0,o.eW)(" Your browser does not support the video tag. ")])])),_:1},8,["modelValue"]))}});const D=(0,m.A)(T,[["__scopeId","data-v-75a774ab"]]);var z=D,Q=a(2933);const B="http://127.0.0.1:5000";function G(){return b({method:"get",url:`${B}/getProjectNameList`}).then((e=>e.data))}function q(e){return b({method:"post",url:`${B}/delete_project`,payload:e}).then((e=>e.data))}function H(e){return b({method:"post",url:`${B}/create_project`,payload:e}).then((e=>e.data))}function J(e){return b({method:"post",url:`${B}/make_null_to_images`,payload:e}).then((e=>e.data))}const Y=e=>((0,o.Qi)("data-v-758715bc"),e=e(),(0,o.jt)(),e),Z={class:"text-contant"},ee={class:"raw-contant"},te=Y((()=>(0,o.Lk)("div",null,"描述：",-1))),ae={class:"dialog-footer"};var ne=(0,o.pM)({__name:"aiMakeImage",props:{projectName:{}},setup(e){const t=e,a=(0,r.KR)(!1),n=(0,r.KR)(""),l=async()=>{a.value=!1,await J({text:n.value,projectName:t.projectName}),(0,C.nk)({message:"提高生成图片人物成功",type:"success"})},u=e=>{Q.s.confirm("是否开始生成?").then((()=>{})).catch((()=>{}))};return(e,t)=>{const r=(0,o.g2)("el-button"),c=(0,o.g2)("el-input"),i=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r,{plain:"",onClick:t[0]||(t[0]=e=>a.value=!0)},{default:(0,o.k6)((()=>[(0,o.eW)("使用Ai创造图片")])),_:1}),(0,o.bF)(i,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value=e),title:"生成Ai图片",width:"800","before-close":u},{footer:(0,o.k6)((()=>[(0,o.Lk)("div",ae,[(0,o.bF)(r,{onClick:t[2]||(t[2]=e=>a.value=!1)},{default:(0,o.k6)((()=>[(0,o.eW)("取消")])),_:1}),(0,o.bF)(r,{type:"primary",onClick:l},{default:(0,o.k6)((()=>[(0,o.eW)("提交生成任务")])),_:1})])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",Z,[(0,o.Lk)("div",ee,[te,(0,o.bF)(c,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),style:{width:"600px"},placeholder:"请输入图片描述",rows:4,type:"textarea",clearable:""},null,8,["modelValue"])])])])),_:1},8,["modelValue"])],64)}}});const oe=(0,m.A)(ne,[["__scopeId","data-v-758715bc"]]);var le=oe;const re=e=>((0,o.Qi)("data-v-5c142492"),e=e(),(0,o.jt)(),e),ue={class:"workspace"},ce={class:"title-contant"},ie=re((()=>(0,o.Lk)("div",{style:{flex:"1"}},null,-1))),se={class:"row-contant"},de={class:"text-contant"},pe=["onClick"],me={key:0,class:"black-bg",style:{width:"130px",height:"130px"}},ve={class:"bottom-contant"},fe=re((()=>(0,o.Lk)("div",{style:{flex:"1"}},null,-1)));var ge=(0,o.pM)({__name:"index",setup(e,{expose:t}){const a=(0,r.Kh)({detail:null,error:null}),n=(0,r.KR)([]),l=(0,r.KR)(!1),u=(0,r.KR)(-1),c=(0,r.KR)([]),i=(0,r.KR)(""),s=(0,r.KR)({}),d=(0,r.KR)(!1),p=()=>{d.value=!0},m=()=>{d.value=!1},v=(e,t)=>{l.value=!0,u.value=e,s.value=t},f=e=>{const t=a.detail?.dict,n="http://127.0.0.1:5000";return`${n}/images/${t}/images/${e}`},g=e=>{n.value[u.value].bgi=e},k=async e=>{i.value=e;try{const e=await j({projectName:i.value});a.detail=e,n.value=e.textArr,c.value=e.images}catch(t){console.error("Failed to fetch user details",t)}},y=((0,r.KR)(""),async()=>{try{a.detail.textArr=n.value;await x({projectName:i.value,ProjectDetail:a.detail});(0,C.nk)({message:"保存成功",type:"success"})}catch(e){console.error("保存失败",e)}}),b=()=>{n.value.push({bgi:"",text:""})},_=async()=>{await y();try{await F({projectName:i.value}),(0,C.nk)({message:"开始创建",type:"success"})}catch(e){console.error("保存失败",e)}},w=e=>{n.value.splice(e,1)};return t({init:k}),(e,t)=>{const a=(0,o.g2)("Delete"),c=(0,o.g2)("el-icon"),k=(0,o.g2)("el-input"),j=(0,o.g2)("el-image"),x=(0,o.g2)("Plus"),F=(0,o.g2)("el-drawer"),C=(0,o.g2)("el-button");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",ue,[(0,o.bF)((0,r.R1)($()),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),group:"name","item-key":"index"},{item:(0,o.k6)((({element:e,index:t})=>[((0,o.uX)(),(0,o.CE)("div",{class:"line-contant",key:"line"+t},[(0,o.Lk)("div",ce,[(0,o.Lk)("div",null,"元素"+(0,h.v_)(t+1)+"：",1),ie,(0,o.bF)(c,{style:{cursor:"pointer"},color:"#409eff",onClick:e=>w(t)},{default:(0,o.k6)((()=>[(0,o.bF)(a)])),_:2},1032,["onClick"])]),(0,o.Lk)("div",se,[(0,o.Lk)("div",de,[(0,o.bF)(k,{class:"input-room",modelValue:e.text,"onUpdate:modelValue":t=>e.text=t,rows:6,type:"textarea",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])]),(0,o.Lk)("div",{class:"image-contant",onClick:a=>v(t,e)},[""===e.bgi?((0,o.uX)(),(0,o.CE)("div",me)):((0,o.uX)(),(0,o.Wv)(j,{key:1,style:{width:"130px",height:"130px"},src:f(e?.bgi||""),"zoom-rate":1.2,"max-scale":7,"min-scale":.2,fit:"cover"},null,8,["src"]))],8,pe)])]))])),_:1},8,["modelValue"]),(0,o.Lk)("div",{class:"add-contant",onClick:b},[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(x)])),_:1})]),(0,o.bF)(F,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),title:"图片库",direction:"rtl",size:"40%"},{default:(0,o.k6)((()=>[l.value?((0,o.uX)(),(0,o.Wv)(P,{key:0,index:u.value,currentData:s.value,projectName:i.value,onChangeImages:g},null,8,["index","currentData","projectName"])):(0,o.Q3)("",!0)])),_:1},8,["modelValue"])]),d.value?((0,o.uX)(),(0,o.Wv)(z,{key:0,projectName:i.value,onClose:m},null,8,["projectName"])):(0,o.Q3)("",!0),(0,o.Lk)("div",ve,[(0,o.bF)(C,{type:"primary",onClick:p},{default:(0,o.k6)((()=>[(0,o.eW)("输出视频预览")])),_:1}),(0,o.bF)(le,{projectName:i.value},null,8,["projectName"]),fe,(0,o.bF)(C,{type:"primary",onClick:y},{default:(0,o.k6)((()=>[(0,o.eW)("保存")])),_:1}),(0,o.bF)(C,{type:"primary",onClick:_},{default:(0,o.k6)((()=>[(0,o.eW)("保存并生成")])),_:1})])],64)}}});const he=(0,m.A)(ge,[["__scopeId","data-v-5c142492"]]);var ke=he;const ye=e=>((0,o.Qi)("data-v-73cca42c"),e=e(),(0,o.jt)(),e),be={class:"home"},_e={class:"del-contant"},je={class:"input-contant",style:{display:"flex",alignItems:"center"}},we=ye((()=>(0,o.Lk)("div",null,"项目名称：",-1))),xe={style:{flex:"auto"}};var Fe=(0,o.pM)({__name:"HomeView",setup(e){const t=(0,r.KR)([]),a=(0,r.KR)(""),n=(0,r.KR)(!1),l=(0,r.KR)(!1),u=(0,r.KR)(!1),c=(0,r.KR)(!1),i=(0,r.KR)(null),s=async()=>{c.value=!0;try{const e=await G();t.value=e,i.value&&(i.value.init(String(e[0])),d.value=String(e[0]))}catch(e){console.error("Failed to fetch user details",e)}finally{c.value=!1}},d=(0,r.KR)(""),p=(e,t)=>{i.value&&i.value.init(String(e.paneName))},m=()=>{Q.s.confirm("确定要删除这个项目吗？这个操作无法撤销。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",icon:R.Delete}).then((async()=>{console.log("项目已删除"),l.value=!0;try{await q({project_name:d.value}),window.location.reload(),(0,C.nk)({type:"success",message:"删除成功!"})}catch{}finally{l.value=!1}})).catch((()=>{(0,C.nk)({type:"info",message:"已取消删除"})}))},v=()=>{n.value=!0},f=async()=>{u.value=!0;try{await H({project_name:a.value}),(0,C.nk)({type:"success",message:"创建成功!"}),window.location.reload()}catch{}finally{u.value=!1}};return(0,o.sV)(s),(e,s)=>{const g=(0,o.g2)("el-tab-pane"),h=(0,o.g2)("el-tabs"),k=(0,o.g2)("el-button"),y=(0,o.g2)("el-input"),b=(0,o.g2)("el-drawer"),_=(0,o.gN)("loading");return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",be,[(0,o.bF)(h,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"demo-tabs",onTabClick:p},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,(e=>((0,o.uX)(),(0,o.Wv)(g,{key:e,label:e,name:e},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,o.bF)(ke,{ref_key:"workSpaceIndexRef",ref:i},null,512),(0,o.Lk)("div",_e,[(0,o.bF)(k,{type:"primary",onClick:v,icon:(0,r.R1)(R.FolderAdd)},null,8,["icon"]),(0,o.bF)(k,{type:"primary",loading:l.value,onClick:m,icon:(0,r.R1)(R.Delete)},null,8,["loading","icon"])]),(0,o.bF)(b,{modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=e=>n.value=e),title:"创建新的项目",direction:"rtl",size:"40%"},{footer:(0,o.k6)((()=>[(0,o.Lk)("div",xe,[(0,o.bF)(k,{loading:u.value,type:"primary",onClick:f},{default:(0,o.k6)((()=>[(0,o.eW)("创建")])),_:1},8,["loading"])])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",je,[we,(0,o.bF)(y,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),style:{width:"240px"},placeholder:"Please input"},null,8,["modelValue"])])])),_:1},8,["modelValue"])])),[[_,c.value]])}}});const Ce=(0,m.A)(Fe,[["__scopeId","data-v-73cca42c"]]);var Re=Ce;const Ve=[{path:"/",name:"home",component:Re},{path:"/about",name:"about",component:()=>a.e(594).then(a.bind(a,5609))}],Ke=(0,g.aE)({history:(0,g.Bt)(),routes:Ve});var Le=Ke,Ne=a(782),Ee=(0,Ne.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),Ae=a(8124);a(4188);const Xe=(0,n.Ef)(f);Xe.use(Ee).use(Le).use(Ae.A),Object.entries(R).forEach((([e,t])=>{Xe.component(e,t)})),Xe.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var r=1/0;for(s=0;s<e.length;s++){n=e[s][0],o=e[s][1],l=e[s][2];for(var u=!0,c=0;c<n.length;c++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[c])}))?n.splice(c--,1):(u=!1,l<r&&(r=l));if(u){e.splice(s--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.0e8aa43d.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="movie-manage:";a.l=function(n,o,l,r){if(e[n])e[n].push(o);else{var u,c;if(void 0!==l)for(var i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var d=i[s];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+l){u=d;break}}u||(c=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.setAttribute("data-webpack",t+l),u.src=n),e[n]=[o];var p=function(t,a){u.onerror=u.onload=null,clearTimeout(m);var o=e[n];if(delete e[n],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,n){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var l=new Promise((function(a,n){o=e[t]=[a,n]}));n.push(o[2]=l);var r=a.p+a.u(t),u=new Error,c=function(n){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;u.message="Loading chunk "+t+" failed.\n("+l+": "+r+")",u.name="ChunkLoadError",u.type=l,u.request=r,o[1](u)}};a.l(r,c,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,r=n[0],u=n[1],c=n[2],i=0;if(r.some((function(t){return 0!==e[t]}))){for(o in u)a.o(u,o)&&(a.m[o]=u[o]);if(c)var s=c(a)}for(t&&t(n);i<r.length;i++)l=r[i],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(s)},n=self["webpackChunkmovie_manage"]=self["webpackChunkmovie_manage"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(4942)}));n=a.O(n)})();
//# sourceMappingURL=app.b031b391.js.map